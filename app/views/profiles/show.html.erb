<% content_for :title, "My Profile" %>

<div style="max-width: 600px;">
  <div style="background: var(--sidebar-bg); padding: 2.5rem; border-radius: 1.5rem; border: 1px solid #334155;">
    <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 2.5rem;">
      <div class="user-avatar" style="width: 80px; height: 80px; background-image: url('https://ui-avatars.com/api/?name=<%= @user.email_address %>&background=random&size=160'); background-size: cover;"></div>
      <div>
        <h2 style="font-size: 1.5rem; margin-bottom: 0.25rem;"><%= @user.email_address %></h2>
        <div style="color: var(--text-secondary); font-size: 0.875rem;">
           Member since <%= @user.created_at.strftime("%B %Y") %>
           <% if @user.admin? %>
             <span style="color: var(--accent-color); font-weight: 600; margin-left: 0.5rem;">â€¢ Administrator</span>
           <% end %>
        </div>
      </div>
    </div>

    <div style="display: flex; flex-direction: column; gap: 1rem;">
      <%= link_to edit_profile_path, class: "download-btn", style: "justify-content: center;" do %>
        <i class="fas fa-key mr-2"></i> Change Password
      <% end %>
      
      <% unless @user.admin? %>
        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #1e293b;">
          <h4 style="color: #ef4444; margin-bottom: 0.5rem;">Danger Zone</h4>
          <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">Once you delete your account, there is no going back. Please be certain.</p>
          <%= link_to profile_path, data: { turbo_method: :delete, turbo_confirm: "Are you absolutely sure you want to delete your account? This action cannot be undone." }, style: "color: #94a3b8; font-size: 0.875rem; text-decoration: underline;" do %>
            Delete my account immediately
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
